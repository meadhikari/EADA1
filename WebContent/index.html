<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="author" content="">


<title>Enterprise Application Development: Practical Assignment
  I</title>

<!-- Bootstrap core CSS -->
<link href="assets/css/bootstrap.css" rel="stylesheet">

<!-- Custom styles for this template -->
<link href="assets/css/jumbotron.css" rel="stylesheet">

<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
      <script src="assets/js/html5shiv.js"></script>
      <script src="assets/js/respond.min.js"></script>
      <![endif]-->
<style>
.searchbox {
  text-align: center;
  padding-top: 10%;
}

.searchbox .btn {
  font-size: 21px;
  padding-top: 10px;
}
</style>
<script>
        function validation()
        {
          var name = document.getElementById("name").value;
          var roll = document.getElementById("roll").value;
          var age = document.getElementById("age").value;

          if (name == "" || roll == "" || age == "")
          {
            alert("Fields Can't be empty");
            console.log("Empty");
            return false;
          } 
          else
          {
            return true;
          }
        }
        function sql(operation)
        {
          switch (operation)
          {
            case "create":
              if (validation()){
                table = document.getElementById("main_table");
                var name = document.getElementById("name").value;
                var roll = document.getElementById("roll").value;
                var age = document.getElementById("age").value;
                row = createTableRow(name,roll,age);
                table.appendChild(row);
                xmlhttp = new XMLHttpRequest();
                
                xmlhttp.open("POST","MainServelet",false);
                xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                xmlhttp.send('operation=create&name='+name+'&roll='+roll+'&age='+age);
                xmlDoc = xmlhttp.responseText;
                console.log(xmlDoc);
                
                
              }
              break;
            case "update":
              if (validation()){
              var name = document.getElementById("name").value;
            var roll = document.getElementById("roll").value;
            var age = document.getElementById("age").value;
            row = createTableRow(name,roll,age);
            
            xmlhttp = new XMLHttpRequest();
            xmlhttp.open("POST","MainServelet",false);
            xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
            xmlhttp.send('operation=update&name='+name+'&roll='+roll+'&age='+age);
            xmlDoc = xmlhttp.responseText;
            console.log(xmlDoc);
              }
              break;
            case "delete":
              if (validation()){
              var name = document.getElementById("name").value;
            var roll = document.getElementById("roll").value;
            var age = document.getElementById("age").value;
            row = createTableRow(name,roll,age);
            
            xmlhttp = new XMLHttpRequest();
            xmlhttp.open("POST","MainServelet",false);
            xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
            xmlhttp.send('operation=delete&name='+name+'&roll='+roll+'&age='+age);
            xmlDoc = xmlhttp.responseText;
            console.log(xmlDoc);
              }
              break;
          } 
        }
        function createTableRow(name,roll,age)
        {

          var row=document.createElement('tr');
          var cell1=row.insertCell(0);
          var cell2=row.insertCell(1);
          var cell3=row.insertCell(2);
          cell1.innerHTML=name;
          cell2.innerHTML=roll;
          cell3.innerHTML=age;
          
          return row;
        }
        function init()
        {
          console.log("document loaded");
          // need to load the table here
          
        }
      </script>

</head>

<body onload="init();">

  <div class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse"
          data-target=".navbar-collapse">
          <span class="icon-bar"></span> <span class="icon-bar"></span> <span
            class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#">Enterprise Application
          Development: Practical Assignment I</a>
      </div>

    </div>
    <!--/.navbar-collapse -->
  </div>
  </div>
  <div class="container">

    <div class="row">
      <div class="searchbox">
        <div class="col-lg-12">

          <form>
            <label>Name: <input type="text" id="name"></label> <label>Roll:
              <input type="text" id="roll">
            </label> <label>Age: <input type="text" id="age"></label>

          </form>
          <button type="submit" class="btn" onclick="sql('create');">Create</button>
          <button type="submit" class="btn" onclick="sql('update');">Update</button>
          <button type="submit" class="btn" onclick="sql('delete');">Delete</button>

        </div>

      </div>
      <hr />
      <div class="row">
        <br />
        <table class="table table-bordered table-hover" id="main_table">
          <tr>
            <th>Name</th>
            <th>Roll</th>
            <th>Age</th>
          </tr>


        </table>
      </div>
    </div>



  </div>
</body>
</html>
